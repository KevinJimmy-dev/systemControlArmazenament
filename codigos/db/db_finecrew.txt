CREATE DATABASE IF NOT EXISTS bd_finecrew;

USE bd_finecrew;

CREATE TABLE `usuarios` (
	`id_usuario` INT NOT NULL AUTO_INCREMENT,
	`username_usuario` varchar(75) NOT NULL,
	`senha_usuario` varchar(75) NOT NULL,
	`nivel_usuario` INT(2) NOT NULL,
	`status_usuario` tinyint(2) NOT NULL,
	PRIMARY KEY (`id_usuario`)
);

CREATE TABLE `produto` (
	`id_produto` INT NOT NULL AUTO_INCREMENT,
	`nome_produto` varchar(75) NOT NULL,
	`categoria_produto` varchar(75) NOT NULL,
	`quantidade_produto` DOUBLE(4,3) NOT NULL,
	`entrega_produto` DATE NOT NULL,
	`validade_produto` DATE NOT NULL,
	`observacao_produto` varchar(255) NOT NULL,
	`id_usuario` INT NOT NULL,
	PRIMARY KEY (`id_produto`)
);

CREATE TABLE `categorias_de_produto` (
	`id_categoria` INT NOT NULL AUTO_INCREMENT,
	`nome_categoria` varchar(75) NOT NULL,
	`id_produto` INT NOT NULL,
	`id_usuario` INT NOT NULL,
	PRIMARY KEY (`id_categoria`)
);

CREATE TABLE `requisicao` (
	`id_requisicao` INT NOT NULL AUTO_INCREMENT,
	`data_requisicao` DATETIME NOT NULL,
	`id_usuario` INT NOT NULL,
	`id_produto` INT NOT NULL,
	PRIMARY KEY (`id_requisicao`)
);

ALTER TABLE `produto` ADD CONSTRAINT `produto_fk0` FOREIGN KEY (`id_usuario`) REFERENCES `usuarios`(`id_usuario`);

ALTER TABLE `categorias_de_produto` ADD CONSTRAINT `categorias_de_produto_fk0` FOREIGN KEY (`id_produto`) REFERENCES `produto`(`id_produto`);

ALTER TABLE `categorias_de_produto` ADD CONSTRAINT `categorias_de_produto_fk1` FOREIGN KEY (`id_usuario`) REFERENCES `usuarios`(`id_usuario`);

ALTER TABLE `requisicao` ADD CONSTRAINT `requisicao_fk0` FOREIGN KEY (`id_usuario`) REFERENCES `usuarios`(`id_usuario`);

ALTER TABLE `requisicao` ADD CONSTRAINT `requisicao_fk1` FOREIGN KEY (`id_produto`) REFERENCES `produto`(`id_produto`);
